webpackJsonp([59],{J1Gk:function(a,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=s("3cXf"),i=s.n(t),r=s("0IQH"),o=s("TVG1"),n=s("h2aJ"),c=s("+6og"),d=(console.log,{components:{Nav:c.a},data:function(){return{orderEva:"",evaValue:"",starText:"非常好",imagesList:[],imagesList_back:[],isWho:"weixin",levelLength:5,starArr:[{id:0,before:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img2.png",pic:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png",after:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png"},{id:1,before:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img2.png",pic:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png",after:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png"},{id:2,before:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img2.png",pic:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png",after:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png"},{id:3,before:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img2.png",pic:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png",after:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png"},{id:4,before:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img2.png",pic:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png",after:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/newOrder_Stars_img1.png"}],showLoading:!0,orderId:"",req:"",detailId:"",is_add:"",evaList:"",orderValue:"",orderIdUp:"",orderDetail:"",aleryValue:""}},mounted:function(){if(!o.a.functions.ifHaveFun(this.$cookies.get("zz_userid")))return location.href="/dom/denglu.php?username="+this.$route.query.username+"&wap=1",!1;this.orderId=this.$route.query.orderId,this.detailId=this.$route.query.detailId,this.req={type:1},this.is_add=this.$route.query.is_add,this.evaList=this.$route.query.evaList,this.orderValue=this.$route.query.orderValue,this.orderIdUp=this.$route.query.orderIdUp,this.orderDetail=this.$route.query.orderDetail,this.aleryValue=this.$route.query.aleryValue,this.state=this.$route.query.state,this.orderEvaFun(this.$route.query.orderId,this.$route.query.detailId,i()(this.req))},methods:{orderEvaFun:function(a,e,s){var t=this;t.showLoading=!0;var i={username:t.$route.query.username,zz_userid:t.$cookies.get("zz_userid"),order_id:a,detail_id:e,req:s,client_type:1};Object(n.b)(i).then(function(a){if(t.showLoading=!1,t.starText=a.tips.feichanghao,1==JSON.parse(s).type){var e=a,i=String(e.pro_info.price),r=i.substring(0,i.indexOf(".")),n=i.replace(/\d+\.(\d*)/,"$1");e.pro_info.shiji_money_left=r,e.pro_info.shiji_money_right=n,t.orderEva=a}else 2==JSON.parse(s).type&&(o.a.functions.ifHaveFun(t.evaList)&&(o.a.functions.ifHaveFun(t.orderIdUp)?(t.$router.push({path:"/order/orderRelated/evaluationList",query:{orderId:t.orderIdUp,username:t.$route.query.username,is_add:1}}),t.$cookies.set("evaluation_state",1)):(t.$router.push({path:"/order/orderRelated/evaluationList",query:{username:t.$route.query.username,is_add:1}}),t.$cookies.set("evaluation_state",1))),o.a.functions.ifHaveFun(t.orderValue)&&(t.$router.push({path:"/order/orderRelated/evaluationList",query:{type:t.state,username:t.$route.query.username,is_add:1}}),t.$cookies.set("evaluation_state",1)),o.a.functions.ifHaveFun(t.orderDetail)&&t.$router.push({path:"/order/orderRelated/orderDetail",query:{username:t.$route.query.username,orderId:t.orderId}}),o.a.functions.ifHaveFun(t.aleryValue)&&t.$router.push({path:"/order/orderRelated/aleryEvaList",query:{username:t.$route.query.username,orderId:t.orderId,detailId:t.detailId}}))}).catch(function(a){t.showLoading=!1,2100003==a.code||2100004==a.code||2100005==a.code?t.$router.push({path:"/order/orderRelated/aleryEvaList",query:{username:t.$route.query.username,orderId:t.orderId,detailId:t.detailId}}):r.a.Alert({message:a.msg}).catch(function(){window.history.back()})})},changeStare:function(a){var e=this.starArr;for(var s in e)e[s].id>a?e[s].pic=e[s].before:e[s].pic=e[s].after;var t=e.filter(function(a){return a.pic==a.after}),i=void 0;switch(t.length){case 1:i=this.orderEva.tips.feichangcha;break;case 2:i=this.orderEva.tips.cha;break;case 3:i=this.orderEva.tips.yiban;break;case 4:i=this.orderEva.tips.hao;break;case 5:i=this.orderEva.tips.feichanghao}this.starArr=e,this.starText=i,this.levelLength=t.length},coverUpload:function(a,e){var s=this,t=this,i=a.srcElement,o=i.files[0];if(8==t.imagesList_back.length)return r.a.Msg({message:t.orderEva.tips.zuiduojizhang}),!1;if(1==e){if(o.type&&!/png|jpeg|gif|jpg/.test(o.type.toLowerCase()))return r.a.Msg({message:t.orderEva.tips.jinzhichigeshi}),!1;if(o.size>5242880)return r.a.Msg({message:t.orderEva.tips.jinzhichigeshi}),!1}this.showLoading=!0,Object(n.h)(i).then(function(a){s.showLoading=!1,1==e&&(s.headImgSrc=a.path),t.imagesList_back.push(a)}).catch(function(a){s.showLoading=!1})},evaValueFun:function(a){this.evaValue=a},deleteImg:function(a){this.imagesList_back.splice(a,1)},submitBtn:function(){var a=this.req;if(!o.a.functions.ifHaveFun(this.evaValue))return r.a.Msg({message:this.orderEva.tips.pinglunneirongbunengweikong}),!1;if(a.type=2,a.level=this.levelLength,a.content=this.evaValue,a.is_add=this.is_add,this.imagesList_back.length){var e="";for(var s in this.imagesList_back)e=e.concat(this.imagesList_back[s].picId+",");a.pic=e.slice(0,e.length-1)}this.orderEvaFun(this.orderId,this.detailId,i()(a))},shopMallFun:function(){this.orderEva.shops_user_id>0&&(location.href="//"+document.domain+"/wap/shops/shop.php?username="+this.$route.query.username+"&channel_id="+this.orderEva.shopsChannelId+"&u_u_id="+this.orderEva.shops_user_id+"&wap=1")}}}),l={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("section",{staticClass:"evaluation-box"},[a.showLoading?s("van-loading",{attrs:{size:"50px",color:"#1989fa"}}):a._e(),a._v(" "),s("van-overlay",{attrs:{show:a.showLoading}}),a._v(" "),""!=a.orderEva?s("section",{staticClass:"evaluation"},[s("Nav",{attrs:{numerical:10,tips:a.orderEva.tips}}),a._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"wrapper_c"},[a._m(0),a._v(" "),s("div",{staticClass:"Max_Center"},[s("div",{staticClass:"order_list"},[s("div",{staticClass:"order_li"},[s("div",{staticClass:"order_top"},[s("div",{staticClass:"shop_name"},[s("div",{staticClass:"home_img",on:{click:a.shopMallFun}},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/newOrder_home.png"}})]),a._v(" "),s("div",{staticClass:"home_txt",on:{click:a.shopMallFun}},[a._v(a._s(a.orderEva.shops_name))]),a._v(" "),a.orderEva.shops_user_id>0?s("div",{staticClass:"arrow1"},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/newOrder_arrow1.png"}})]):a._e()])]),a._v(" "),s("div",{staticClass:"order_center"},[s("div",{staticClass:"order_money"},[s("div",{staticClass:"money"},[s("span",[a._v(a._s(a.orderEva.currency_symbol))]),a._v(a._s(a.orderEva.pro_info.shiji_money_left)),s("span",[a._v("."+a._s(a.orderEva.pro_info.shiji_money_right))])]),a._v(" "),s("div",{staticClass:"Number"},[a._v(a._s(a.orderEva.pro_info.num_info))])]),a._v(" "),s("div",{staticClass:"order_name"},[s("div",{staticClass:"shop_img"},[s("img",{attrs:{src:a.orderEva.pro_info.pic}})]),a._v(" "),s("div",{staticClass:"shop_link"},[s("div",{staticClass:"shop_link_tit"},[a._v(a._s(a.orderEva.pro_info.name))]),a._v(" "),s("div",{staticClass:"shop_link_txt"},[a._v(a._s(a.orderEva.pro_info.param_info))])])])])]),a._v(" "),s("div",{staticClass:"level"},[s("div",{staticClass:"level_bottom"},[s("div",{staticClass:"Stars_txt"},[a._v(a._s(a.orderEva.tips.xingjipingjia))]),a._v(" "),s("div",{staticClass:"Stars"},a._l(a.starArr,function(e,t){return s("div",{key:t,staticClass:"Stars_li",on:{click:function(e){return a.changeStare(t)}}},[s("img",{attrs:{src:e.pic}})])}),0),a._v(" "),s("div",{staticClass:"Stars_txt1"},[a._v(a._s(a.starText))])])])]),a._v(" "),s("div",{staticClass:"evaluate"},[s("div",{staticClass:"evaluate_c"},[a._m(1),a._v(" "),s("div",{staticClass:"evaluate_txt"},[s("textarea",{staticClass:"textarea_txt",attrs:{placeholder:a.orderEva.tips.shifoumanzuqidai},domProps:{value:a.evaValue},on:{input:function(e){return a.evaValueFun(e.target.value)}}})])]),a._v(" "),s("div",{staticClass:"mode1_ul"},[s("div",{staticClass:"mode1_li"},[s("div",{staticClass:"mode1_li_add"},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/newOrder_add.png"}}),a._v(" "),s("input",{staticClass:"upload-file",attrs:{name:"upFile",type:"file",accept:"image/*"},on:{change:function(e){return a.coverUpload(e,1)}}})])]),a._v(" "),a._l(a.imagesList_back,function(e,t){return s("div",{key:t,staticClass:"mode1_li"},[s("div",{staticClass:"mode1_li_img"},[s("img",{attrs:{src:e.path}})]),a._v(" "),s("div",{staticClass:"delFather",on:{click:function(e){return e.stopPropagation(),a.deleteImg(t)}}},[a.imagesList_back.length?s("div",{staticClass:"del"},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/newOrder_del.png"}})]):a._e()])])})],2)]),a._v(" "),s("div",{staticClass:"button_a",on:{click:a.submitBtn}},[a._v(a._s(a.orderEva.tips.tijiaopingjia))])])])])],1):a._e()],1)},staticRenderFns:[function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"wrapper_bg"},[e("div",{staticClass:"wrapper_bg_c"})])},function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"evaluate_img"},[e("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/newOrder_evaluate_img.png"}})])}]};var h=s("C7Lr")(d,l,!1,function(a){s("PwG6")},"data-v-a9dad248",null);e.default=h.exports},PwG6:function(a,e){}});
//# sourceMappingURL=59.3773565e51affd2e7798.js.map