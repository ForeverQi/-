webpackJsonp([60],{IWqI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("3cXf"),a=s.n(i),r=s("0IQH"),o=s("HcfM"),n=s("TRc7"),d=s("VTmd"),u=s("+6og"),c=s("TVG1"),l=(console.log,{name:"addressList",components:{Nav:u.a},data:function(){return{titUrl:"",Htitle:"收货地址",address:0,showLoading:!0,clues:"",theme:"color1",listStatus:"",deliveryType:"",newColor1:"",listData:""}},mounted:function(){if(this.getColorFun(),!c.a.functions.ifHaveFun(this.$cookies.get("zz_userid")))return location.href="/dom/denglu.php?username="+this.$route.query.username+"&wap=1",!1;this.is_set=c.a.functions.ifHaveFun(this.$route.query.is_set)?this.$route.query.is_set:1;this.$cookies.get("zz_userid");var e=this.$route.query.channel_id?this.$route.query.channel_id:0,t=this.$route.query.takeout?this.$route.query.takeout:0,s=this.$route.query.orderId,i=this.$route.query.detailId,a=this.$route.query.redirect,r=this.$route.query.subMitJson,o=this.$route.query.jdWay;this.channel_id=e,this.takeout=t,this.order_id=s,this.detail_id=i,this.redirect=a,this.subMitJson=r,this.jdWay=o,this.deliveryType=this.$route.query.deliveryType,this.cssColor="#f00",this.listFun(1,"")},methods:{listFun:function(e,t,s){var i=this,n=i.$cookies.get("zz_userid"),d=c.a.functions.ifHaveFun(t)?t:{};3==i.is_set&&1==s&&(e=1),c.a.functions.ifHaveFun(this.deliveryType)&&"city"==this.deliveryType&&(d.deliveryType="city");var u={zz_userid:n,type:2==i.is_set&&1==s?1:e,req:a()(d),username:i.$route.query.username,client_type:1,pageSize:40};Object(o.a)(u).then(function(r){if(i.showLoading=!1,i.listData=c.a.functions.ifHaveFun(r)?r:"",i.clues=c.a.functions.ifHaveFun(r.la)?r.la:i.clues,1==e){var o=c.a.functions.ifHaveFun(r.list);if(i.address=o?r.list:[],3==i.is_set&&1==s){i.getAddressCodingt(),i.getAddressCodingt2();var n="",d=c.a.functions.ifHaveFun(r.list)?r.list:[];for(var u in d)d[u].id==t.id&&(n=d[u].province+" "+d[u].city+" "+d[u].district+" "+d[u].street+" "+d[u].xiaoqu);var l=c.a.functions.ifHaveFun(i.$cookies.get("supplyCity"))?i.$cookies.get("supplyCity"):{};l[2]=n,i.$cookies.set("supplyCity",l);var h=JSON.parse(decodeURIComponent(i.subMitJson));h.address_id=t.id,i.$router.push({path:"/order/submitOrder/index",query:{subMitJson:encodeURIComponent(a()(h)),username:i.$route.query.username}})}}else if(2==e)if(2==i.is_set){var y={address_id:t.id};i.$router.push({path:"/order/orderRelated/returnGoods",query:{username:i.$route.query.username,req:a()(y),detailId:i.detail_id,orderId:i.order_id,redirect:i.redirect,jdWay:i.jdWay,jdStatus:i.$route.query.jdStatus,goodsValueType:i.$route.query.goodsValueType,textareaValue:i.$route.query.textareaValue,imagesList_back:i.$route.query.imagesList_back}})}else{var _=i.$cookies.get("types");1==s&&(location.href="//"+document.domain+"/VFrontend/order/orderRelated/orderDetail?username="+i.$route.query.username+"&type="+_)}}).catch(function(o){if(i.showLoading=!1,500003==o.code)if(wx.hideLoading(),2==e)if(2==i.is_set){var n={address_id:t.id};i.$router.push({path:"/order/orderRelated/returnGoods",query:{username:i.$route.query.username,req:a()(n),detailId:i.detail_id,orderId:i.order_id,redirect:i.redirect,jdWay:i.jdWay,jdStatus:i.$route.query.jdStatus,goodsValueType:i.$route.query.goodsValueType,textareaValue:i.$route.query.textareaValue,imagesList_back:i.$route.query.imagesList_back}})}else if(3==i.is_set&&2==e){i.getAddressCodingt(),i.getAddressCodingt2();var d="",u=c.a.functions.ifHaveFun(res)?res:[];for(var l in u)u[l].id==t.id&&(d=u[l].province+" "+u[l].city+" "+u[l].district+" "+u[l].street+" "+u[l].xiaoqu);var h=c.a.functions.ifHaveFun(i.$cookies.get("supplyCity"))?i.$cookies.get("supplyCity"):{};h[2]=d,i.$cookies.set("supplyCity",h);var y=JSON.parse(decodeURIComponent(i.subMitJson));y.address_id=t.id,wx.navigateTo({url:"/pages/order/newDetail?subMitJson="+encodeURIComponent(a()(y))})}else{var _=i.$cookies.get("types");1==s&&wx.navigateTo({url:"/pages/order/detailed?type="+_})}else r.a.Msg({message:o.msg});else r.a.Msg({message:o.msg})})},delList:function(e){var t=this,s={id:e,state:2},i={zz_userid:t.$cookies.get("zz_userid"),req:s=a()(s),flag:"del",type:2,username:t.$route.query.username};r.a.Confirm({title:"提示",message:t.clues.shifoushanchucidizhi}).then(function(){return Object(o.a)(i).then(function(e){for(var i=t.address,a=JSON.parse(s),r=0;r<i.length;r++)i[r].id==a.id&&(i.splice(r,1),t.address=i);if(0==t.address.length){var o=c.a.functions.ifHaveFun(t.$cookies.get("supplyCity"))?t.$cookies.get("supplyCity"):{};o[2]="",t.$cookies.set("supplyCity",o)}})})},addressFun:function(e){var t=this.takeout?this.takeout:0,s=(this.channel_id,this.is_set);e&&t>0&&this.$cookies.set("address_id",e),t>0||1==s||this.changeAddress(e,1)},getAddressCodingt:function(){var e=this,t=c.a.functions.ifHaveFun(e.$cookies.get("supplyCity"))?e.$cookies.get("supplyCity"):{};e.$cookies.set("obtainStatus","1"),t=c.a.functions.ifHaveFun(t)?t[2]:"",Object(n.b)({username:e.$route.query.username,zz_userid:e.$cookies.get("zz_userid"),address:c.a.functions.ifHaveFun(this.cityInfo)?this.cityInfo:c.a.functions.ifHaveFun(t)?t:""}).then(function(t){e.$cookies.set("supplyCoding",t)})},getAddressCodingt2:function(){var e=this,t=c.a.functions.ifHaveFun(e.$cookies.get("supplyCity"))?e.$cookies.get("supplyCity"):{},s=[];s=c.a.functions.ifHaveFun(t)?t[2]:"",c.a.functions.ifHaveFun(s)&&(s=s.split(" ")[0]),Object(n.b)({username:e.$route.query.username,address:s}).then(function(t){e.$cookies.set("supplyCoding_address",t)})},defaultAdd:function(e,t){if(1==this.address[t].is_default)return!1;this.changeAddress(e)},changeAddress:function(e,t){var s={id:e},i=this.address;if(1==this.is_set)for(var a=0;a<i.length;a++)if(1==i[a].is_default&&e==i[a].id)return!1;if(1!=t){r.a.Msg({message:this.clues.xiugaimorendizhichenggong});for(var o="",n="",d=0;d<i.length;d++)i[d].id==e?(i[d].is_default=1,o=i[d].province+" "+i[d].city+" "+i[d].district,n=i[d].province+" "+i[d].city+" "+i[d].district+" "+i[d].address):i[d].is_default=0;var u=c.a.functions.ifHaveFun(this.$cookies.get("supplyCity"))?this.$cookies.get("supplyCity"):{};u[2]=o,this.cityInfo=n,this.$cookies.set("supplyCity",u),this.getAddressCodingt(),this.getAddressCodingt2()}this.address=i,this.listFun(2,s,t)},getColorFun:function(){var e=this;Object(d.c)({username:this.$route.query.username}).then(function(t){e.theme=c.a.functions.colorFun(t.color),e.newColor1=c.a.functions.newColor(t.color).bgcColor1})},editadd:function(e){c.a.functions.ifHaveFun(this.$route.query.deliveryType)&&"city"==this.$route.query.deliveryType?(this.setCookies(),this.$router.push({path:"/address/views/tcpsAdd",query:{username:this.$route.query.username,id:e}})):(this.setCookies(e),location.href="//"+document.domain+"/VFrontend/address/views/addressDetail?username="+this.$route.query.username)},addadd:function(){this.setCookies(),c.a.functions.ifHaveFun(this.$route.query.deliveryType)&&"city"==this.$route.query.deliveryType?this.$router.push({path:"/address/views/tcpsAdd",query:{username:this.$route.query.username}}):location.href="//"+document.domain+"/VFrontend/address/views/addressDetail?username="+this.$route.query.username},setCookies:function(e){var t=this.takeout?this.takeout:0,s={};s.takeout=t,s.is_set=this.is_set,c.a.functions.ifHaveFun(e)&&(s.id=e),c.a.functions.ifHaveFun(this.detail_id)&&(s.detail_id=this.detail_id),c.a.functions.ifHaveFun(this.order_id)&&(s.order_id=this.order_id),(c.a.functions.ifHaveFun(this.redirect)||0==this.redirect)&&(s.redirect=this.redirect),c.a.functions.ifHaveFun(this.subMitJson)&&(s.subMitJson=this.subMitJson),(c.a.functions.ifHaveFun(this.jdWay)||0==this.jdWay)&&(s.jdWay=this.jdWay),(c.a.functions.ifHaveFun(this.$route.query.jdStatus)||0==this.$route.query.jdStatus)&&(s.jdStatus=this.$route.query.jdStatus),c.a.functions.ifHaveFun(this.$route.query.goodsValueType||0==this.$route.query.goodsValueType)&&(s.goodsValueType=this.$route.query.goodsValueType),c.a.functions.ifHaveFun(this.$route.query.textareaValue)&&(s.textareaValue=this.$route.query.textareaValue),c.a.functions.ifHaveFun(this.$route.query.imagesList_back)&&(s.imagesList_back=this.$route.query.imagesList_back),c.a.functions.ifHaveFun(this.$route.query.deliveryType)&&(s.deliveryType=this.$route.query.deliveryType),1==this.$route.query.orderstatus?s.orderstatus=1:c.a.functions.ifHaveFun(this.$cookies.get("queryJsonAdress"))&&c.a.functions.ifHaveFun(1==this.$cookies.get("queryJsonAdress").orderstatus)&&(s.orderstatus=1),this.$cookies.set("queryJsonAdress",s)}}}),h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"addressList-box"},[e.showLoading?s("van-loading",{attrs:{size:"50px",color:"#1989fa"}}):e._e(),e._v(" "),s("van-overlay",{staticStyle:{"z-index":"2001 !important"},attrs:{show:e.showLoading}}),e._v(" "),s("section",{staticClass:"addressList",class:e.theme},[e.clues?s("Nav",{attrs:{numerical:1,tips:e.clues}}):e._e(),e._v(" "),s("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title=e.clues.shouhuodizhi,expression:"($route.meta.title = clues.shouhuodizhi)"}],staticClass:"address"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"wrapper_c"},[e._m(0),e._v(" "),e.address.length>0?s("div",[s("div",{staticClass:"Max_Center"},e._l(e.address,function(t,i){return s("div",{key:i,staticClass:"address_list",on:{click:function(s){return e.addressFun(t.id)}}},[s("div",{staticClass:"address_list_t"},[s("div",{staticClass:"user_name"},[s("div",{staticClass:"user_name_txt"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"user_name_txt"},[e._v(e._s(t.shouji_tel))])]),e._v(" "),s("div",{staticClass:"address_txt"},[e._v("\n                                        "+e._s(t.province)+e._s(t.city)+e._s(t.district)+e._s(t.street)+e._s(t.xiaoqu)+e._s(t.address)+"\n                                    ")])]),e._v(" "),s("div",{staticClass:"address_list_b"},[s("div",{staticClass:"default"},[s("div",{staticClass:"default_img",class:1==t.is_default?"dc_active":"",on:{click:function(s){return s.stopPropagation(),e.defaultAdd(t.id,i)}}},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/redesign_order_icon5.png"}})]),e._v(" "),s("div",{staticClass:"default_txt",class:1==t.is_default?"default_txt_active":"",on:{click:function(s){return s.stopPropagation(),e.defaultAdd(t.id,i)}}},[e._v("\n                                            "+e._s(e.clues.sheweimoren)+"\n                                        ")])]),e._v(" "),s("div",{staticClass:"del_img",on:{click:function(s){return s.stopPropagation(),e.delList(t.id,i)}}},[s("img",{attrs:{src:"https://aimg8.oss-cn-shanghai.aliyuncs.com/xcx_pack/vip_shopmall/redesign_del.png"}})]),e._v(" "),s("div",{staticClass:"del_img",on:{click:function(s){return s.stopPropagation(),e.editadd(t.id)}}},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/redesign_modify.png"}})])])])}),0),e._v(" "),s("div",{staticStyle:{height:"1rem"}}),e._v(" "),s("div",{staticClass:"bottom"},[s("div",{staticClass:"bottom_navi",style:{background:e.cssColor},on:{click:e.addadd}},[e._m(1),e._v(" "),s("div",{staticClass:"add_address"},[e._v(e._s(e.clues.xinzengshouhuodizhi))])])])]):e._e(),e._v(" "),0==e.address.length&&"city"==e.deliveryType?s("div",{staticClass:"Max_Center_noData",on:{tap:e.addadd}},[s("img",{staticClass:"noDataImg",staticStyle:{width:"1.60rem",height:"1.90rem","margin-bottom":"0.60rem"},attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_VFrontend/tcpsAddress.png"}}),e._v(" "),s("span",{staticStyle:{color:"#222222","font-size":"0.34rem","margin-bottom":"0.10rem"}},[e._v("暂无可用地址")]),e._v(" "),s("span",{staticStyle:{"font-size":"0.24rem",color:"#a9a9a9","white-space":"nowrap"}},[e._v("同城配送需要通过地图定位位置新的配送方式")]),e._v(" "),s("div",{staticClass:"tcps_address",style:"background:"+e.newColor1,on:{click:e.addadd}},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/redesign_add_img.png"}}),e._v(" "),s("span",[e._v("新增地址")])])]):e._e(),e._v(" "),0==e.address.length&&"city"!=e.deliveryType?s("div",{staticClass:"Max_Center_noData",on:{click:e.addadd}},[s("img",{staticClass:"noDataImg",attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/redesign_addressOrder.png"}}),e._v(" "),s("span",[e._v(e._s(e.clues.ninhaimeiyoushouhuodizhi))]),e._v(" "),s("div",{staticClass:"Max_Center_noDataBtn",style:{background:e.newColor1}},[s("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/redesign_add_img.png"}}),e._v(" "),s("span",[e._v(e._s(e.clues.tianjiashouhuodizhi))])])]):e._e()])])])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper_bg"},[t("div",{staticClass:"wrapper_bg_c"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"add_img"},[t("img",{attrs:{src:"https://aimg8.dlssyht.cn/xcx_pack/vip_shopmall/redesign_add_img.png"}})])}]};var y=s("C7Lr")(l,h,!1,function(e){s("aZxN")},null,null);t.default=y.exports},aZxN:function(e,t){}});
//# sourceMappingURL=60.b4506424aac0e194046e.js.map